// Comprehensive brand database with variations and categories
export const brandDatabase = {
  // Luxury Fashion
  luxury: {
    'GUCCI': ['GUCCI', 'GG', 'GG MARMONT', 'GUCCI ITALY', 'GUCCIO GUCCI'],
    'LOUIS VUITTON': ['LOUIS VUITTON', 'LV', 'VUITTON', 'LOUIS V', 'LOUIS VUITTON PARIS'],
    'CHANEL': ['CHANEL', 'CC', 'COCO CHANEL', 'CHANEL PARIS', 'GABRIELLE CHANEL'],
    'PRADA': ['PRADA', 'PRADA MILANO', 'PRADA ITALY', 'PRADA SPORT', 'LINEA ROSSA'],
    'HERMES': ['HERMES', 'HERMÈS', 'HERMES PARIS', 'HERMES FRANCE', 'H HERMES'],
    'DIOR': ['DIOR', 'CHRISTIAN DIOR', 'CD', 'DIOR HOMME', 'BABY DIOR', 'DIOR PARIS'],
    'VERSACE': ['VERSACE', 'GIANNI VERSACE', 'VERSACE JEANS', 'VERSUS VERSACE', 'VERSACE COLLECTION'],
    'BURBERRY': ['BURBERRY', 'BURBERRY LONDON', 'BURBERRY BRIT', 'BURBERRYS', 'BURBERRY PRORSUM'],
    'BALENCIAGA': ['BALENCIAGA', 'BALENCIAGA PARIS', 'BALENCIAGA BB'],
    'SAINT LAURENT': ['SAINT LAURENT', 'YSL', 'YVES SAINT LAURENT', 'SAINT LAURENT PARIS', 'RIVE GAUCHE'],
    'VALENTINO': ['VALENTINO', 'VALENTINO GARAVANI', 'VALENTINO ROMA', 'RED VALENTINO', 'MARIO VALENTINO'],
    'GIVENCHY': ['GIVENCHY', 'GIVENCHY PARIS', 'GIVENCHY COUTURE'],
    'FENDI': ['FENDI', 'FENDI ROMA', 'FENDI ITALY', 'FF', 'FENDI ZUCCA'],
    'BOTTEGA VENETA': ['BOTTEGA VENETA', 'BOTTEGA', 'BV', 'BOTTEGA V'],
    'CELINE': ['CELINE', 'CÉLINE', 'CELINE PARIS', 'OLD CELINE'],
    'LOEWE': ['LOEWE', 'LOEWE MADRID', 'LOEWE SPAIN'],
    'MCM': ['MCM', 'MCM WORLDWIDE', 'MCM MÜNCHEN', 'MODE CREATION MUNICH'],
    'COACH': ['COACH', 'COACH NEW YORK', 'COACH 1941', 'COACH SIGNATURE'],
    'MICHAEL KORS': ['MICHAEL KORS', 'MK', 'MICHAEL MICHAEL KORS', 'KORS'],
    'TORY BURCH': ['TORY BURCH', 'TORY', 'TB', 'TORY SPORT'],
  },
  
  // Designer/Premium
  designer: {
    'MOSCHINO': ['MOSCHINO', 'LOVE MOSCHINO', 'MOSCHINO COUTURE', 'MOSCHINO JEANS'],
    'DOLCE & GABBANA': ['DOLCE & GABBANA', 'D&G', 'DOLCE&GABBANA', 'DOLCE GABBANA'],
    'ARMANI': ['ARMANI', 'GIORGIO ARMANI', 'EMPORIO ARMANI', 'ARMANI EXCHANGE', 'ARMANI JEANS'],
    'MARC JACOBS': ['MARC JACOBS', 'MARC BY MARC JACOBS', 'MJ', 'THE MARC JACOBS'],
    'ALEXANDER MCQUEEN': ['ALEXANDER MCQUEEN', 'MCQUEEN', 'AMQ', 'ALEXANDER MC QUEEN'],
    'STELLA MCCARTNEY': ['STELLA MCCARTNEY', 'STELLA', 'STELLA MC CARTNEY'],
    'KENZO': ['KENZO', 'KENZO PARIS', 'KENZO TIGER', 'KENZO EYE'],
    'DSQUARED2': ['DSQUARED2', 'DSQUARED', 'D2', 'DSQUARED²'],
    'OFF-WHITE': ['OFF-WHITE', 'OFF WHITE', 'OFF-WHITE C/O VIRGIL ABLOH', 'OFFWHITE'],
    'PALM ANGELS': ['PALM ANGELS', 'PALM ANGELS MILANO'],
    'BALMAIN': ['BALMAIN', 'BALMAIN PARIS', 'PIERRE BALMAIN'],
    'ISABEL MARANT': ['ISABEL MARANT', 'ISABEL MARANT ÉTOILE', 'IM', 'MARANT'],
    'ACNE STUDIOS': ['ACNE STUDIOS', 'ACNE', 'ACNE JEANS'],
    'GANNI': ['GANNI', 'GANNI COPENHAGEN'],
    'ZIMMERMANN': ['ZIMMERMANN', 'ZIMMERMANN AUSTRALIA'],
  },
  
  // High Street & Contemporary
  highStreet: {
    'ZARA': ['ZARA', 'ZARA BASIC', 'ZARA MAN', 'ZARA WOMAN', 'ZARA TRF'],
    'COS': ['COS', 'COLLECTION OF STYLE', 'COS STORES'],
    'MASSIMO DUTTI': ['MASSIMO DUTTI', 'MASSIMO', 'MD'],
    '& OTHER STORIES': ['& OTHER STORIES', 'OTHER STORIES', '&OTHERSTORIES'],
    'ARKET': ['ARKET', 'ARKET COPENHAGEN'],
    'MANGO': ['MANGO', 'MNG', 'MANGO MAN', 'MANGO SUIT'],
    'H&M': ['H&M', 'H & M', 'HENNES & MAURITZ', 'H&M CONSCIOUS'],
    'UNIQLO': ['UNIQLO', 'UNIQLO U', 'GU'],
    'TOPSHOP': ['TOPSHOP', 'TOPMAN', 'TOPSHOP UNIQUE'],
    'URBAN OUTFITTERS': ['URBAN OUTFITTERS', 'UO', 'URBAN'],
    'FREE PEOPLE': ['FREE PEOPLE', 'FP', 'FREE PEOPLE MOVEMENT'],
    'ANTHROPOLOGIE': ['ANTHROPOLOGIE', 'ANTHRO'],
    'REFORMATION': ['REFORMATION', 'REF'],
  },
  
  // Sportswear & Streetwear
  sportswear: {
    'NIKE': ['NIKE', 'NIKE AIR', 'NIKE SB', 'NIKE ACG', 'JORDAN', 'AIR JORDAN'],
    'ADIDAS': ['ADIDAS', 'ADIDAS ORIGINALS', 'ADIDAS PERFORMANCE', 'Y-3', 'YEEZY'],
    'PUMA': ['PUMA', 'PUMA SPORT', 'PUMA SELECT'],
    'REEBOK': ['REEBOK', 'RBK', 'REEBOK CLASSIC'],
    'NEW BALANCE': ['NEW BALANCE', 'NB', 'NEW BALANCE ATHLETICS'],
    'UNDER ARMOUR': ['UNDER ARMOUR', 'UA', 'UNDER ARMOR'],
    'CHAMPION': ['CHAMPION', 'CHAMPION USA', 'CHAMPION REVERSE WEAVE'],
    'FILA': ['FILA', 'FILA SPORT', 'FILA ITALIA'],
    'NORTH FACE': ['THE NORTH FACE', 'NORTH FACE', 'TNF'],
    'PATAGONIA': ['PATAGONIA', 'PATAGONIA OUTDOOR'],
    'COLUMBIA': ['COLUMBIA', 'COLUMBIA SPORTSWEAR'],
    'SUPREME': ['SUPREME', 'SUPREME NEW YORK'],
    'BAPE': ['BAPE', 'A BATHING APE', 'AAPE'],
    'STONE ISLAND': ['STONE ISLAND', 'SI', 'STONE ISLAND SHADOW'],
    'STUSSY': ['STUSSY', 'STÜSSY', 'STUSSY WORLDWIDE'],
  },
  
  // Denim Specialists
  denim: {
    'LEVIS': ['LEVI\'S', 'LEVIS', 'LEVI STRAUSS', 'LEVI\'S VINTAGE'],
    'WRANGLER': ['WRANGLER', 'WRANGLER JEANS'],
    'LEE': ['LEE', 'LEE JEANS', 'LEE RIDERS'],
    'DIESEL': ['DIESEL', 'DIESEL INDUSTRY', 'DIESEL BLACK GOLD'],
    'G-STAR': ['G-STAR', 'G-STAR RAW', 'GSTAR'],
    'REPLAY': ['REPLAY', 'REPLAY JEANS'],
    'TRUE RELIGION': ['TRUE RELIGION', 'TRUE RELIGION JEANS'],
    'SEVEN FOR ALL MANKIND': ['7 FOR ALL MANKIND', 'SEVEN FOR ALL MANKIND', '7FAM'],
    'CITIZENS OF HUMANITY': ['CITIZENS OF HUMANITY', 'COH'],
    'AG JEANS': ['AG JEANS', 'AG ADRIANO GOLDSCHMIED', 'AG'],
    'FRAME': ['FRAME', 'FRAME DENIM'],
    'J BRAND': ['J BRAND', 'JBRAND'],
  }
};

// Helper function to detect brand with confidence
export function detectBrand(text) {
  if (!text) return { brand: null, confidence: 0 };
  
  const upperText = text.toUpperCase();
  let bestMatch = { brand: null, confidence: 0, category: null };
  
  // Check each category
  for (const [category, brands] of Object.entries(brandDatabase)) {
    for (const [mainBrand, variations] of Object.entries(brands)) {
      for (const variation of variations) {
        if (upperText.includes(variation)) {
          const confidence = variation.length / upperText.length;
          if (confidence > bestMatch.confidence) {
            bestMatch = {
              brand: mainBrand,
              confidence: Math.min(confidence * 1.5, 1), // Boost confidence, cap at 1
              category
            };
          }
        }
      }
    }
  }
  
  return bestMatch;
}

// Determine brand tier for pricing
export function getBrandTier(brand) {
  const brandUpper = brand?.toUpperCase();
  
  // Check luxury brands
  if (brandDatabase.luxury[brandUpper]) return 'luxury';
  
  // Check designer brands
  if (brandDatabase.designer[brandUpper]) return 'designer';
  
  // Check high street
  if (brandDatabase.highStreet[brandUpper]) return 'highStreet';
  
  // Check sportswear
  if (brandDatabase.sportswear[brandUpper]) return 'sportswear';
  
  // Check denim
  if (brandDatabase.denim[brandUpper]) return 'denim';
  
  return 'unknown';
}